<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>0 → losowe 1–21 → restart</title>
  <style>
    html,body{margin:0;width:100%;height:100%;background:#000}
    img{position:fixed;inset:0;width:100vw;height:100vh;object-fit:contain;
        object-position:center;user-select:none;cursor:pointer}
    #counter{position:fixed;top:12px;right:12px;padding:6px 10px;background:rgba(255,255,255,.2);
             color:#fff;font:bold 18px sans-serif;border-radius:4px;z-index:9;pointer-events:none}
  </style>
</head>
<body>

<div id="counter">0 / 21</div>
<img id="viewer" alt="viewer">

<script>
/* ── konfiguracja ───────────────────────────── */
const IMG_FOLDER = 'img/';   // gdzie są obrazy 0.jpg ... 21.jpg
const EXT        = '.jpg';
const MIN_IMG    = 1;
const MAX_IMG    = 21;
/* ───────────────────────────────────────────── */

const $img = document.getElementById('viewer');
const $cnt = document.getElementById('counter');

let queue = [];   // wylosowana kolejność [1..21]
let idx   = -1;   // -1 oznacza ekran startowy 0.jpg

function shuffle(array){
  for(let i=array.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function makeQueue(){
  queue = [];
  for(let n = MIN_IMG; n <= MAX_IMG; n++) queue.push(n);
  shuffle(queue);
  idx = -1; // po utworzeniu kolejki zaczynamy od 0.jpg
  render();
}

function render(){
  if(idx === -1){
    // ekran startowy
    $img.src = IMG_FOLDER + '0' + EXT;
    $cnt.textContent = `0 / ${MAX_IMG}`;
  } else {
    const n = queue[idx];
    $img.src = IMG_FOLDER + String(n) + EXT;
    $cnt.textContent = `${idx+1} / ${MAX_IMG}`;
  }
}

function next(){
  // jeśli byliśmy na 0.jpg, przejdź do pierwszego w kolejce
  if(idx === -1){
    idx = 0;
    render();
    return;
  }
  // jeśli są jeszcze elementy w kolejce – następny
  if(idx < queue.length - 1){
    idx++;
    render();
    return;
  }
  // skończyliśmy 1..21 → restart: znów 0.jpg i nowa kolejność
  makeQueue();
}

// kliknięcie przechodzi dalej
$img.addEventListener('click', next);

// uruchomienie
makeQueue();
</script>
</body>
</html>
